doctype html
html
    head
        meta(charset='utf-8')
        title='PartyPlaylist'
        meta(content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no', name='viewport')
        // Cookie JS
        script(src='javascripts/js.cookie.js', type='text/javascript')
        // jQuery 2.1.4
        script(src='plugins/jQuery/jQuery-2.1.4.min.js')
        // Loadingbar JS
        script(src='javascripts/jquery.loadingbar.js')
        // Loadingbar CSS
        link(rel='stylesheet', type='text/css', href='stylesheets/loadingbar.css')
        // toastr JS
        script(src='//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js', type='text/javascript')
        // toastr CSS
        link(rel='stylesheet', type='text/css', href='//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css')
        // Bootstrap 3.3.4
        link(rel='stylesheet', type='text/css', href='stylesheets/bootstrap.min.css')
        // Font Awesome Icons
        link(rel='stylesheet', type='text/css', href='https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css')
        // Ionicons
        link(rel='stylesheet', type='text/css', href='https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css')
        // Theme Style
        link(rel='stylesheet', type='text/css', href='stylesheets/AdminLTE.min.css')
        //
            AdminLTE Skins. We have chosen the skin-blue for this starter
            page. However, you can choose any other skin. Make sure you
            apply the skin class to the body tag so the changes take effect.
        link(rel='stylesheet', type='text/css', href='stylesheets/skins/skin-blue.min.css')
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    //
        BODY TAG OPTIONS:
        =================
        Apply one or more of the following classes to get the
        desired effect
        |---------------------------------------------------------|
        | SKINS         | skin-blue                               |
        |               | skin-black                              |
        |               | skin-purple                             |
        |               | skin-yellow                             |
        |               | skin-red                                |
        |               | skin-green                              |
        |---------------------------------------------------------|
        |LAYOUT OPTIONS | fixed                                   |
        |               | layout-boxed                            |
        |               | layout-top-nav                          |
        |               | sidebar-collapse                        |
        |               | sidebar-mini                            |
        |---------------------------------------------------------|
    body.skin-blue.sidebar-mini
        .wrapper
            // Main Header
            header.main-header
                // Logo
                a.logo(href='/playboard')
                    // mini logo for sidebar mini 50x50 pixels
                    span.logo-mini
                        b PP
                        | L
                    // logo for regular state and mobile devices
                    span.logo-lg
                        b Party
                        | Playlist
                // Header Navbar
                nav.navbar.navbar-static-top(role='navigation')
                    // Sidebar toggle button
                    a.sidebar-toggle(href='#', data-toggle='offcanvas', role='button')
                        span.sr-only Toggle navigation
                    // Navbar Right Menu
                    .navbar-custom-menu
                        ul.nav.navbar-nav
                            // Notifications Menu
                            li.dropdown.notifications-menu
                                // Menu toggle button
                                a.dropdown-toggle(href='#', data-toggle='dropdown')
                                    i.fa.fa-bell-o
                                    span.label.label-danger 8
                                ul.dropdown-menu
                                    li.header
                                        .box-header.with-border
                                            h3.box-title Latest Members
                                            .box-tools.pull-right
                                                span.label.label-danger 8 New Members
                                        // /.box-header
                                        .box-body.no-padding
                                            ul.users-list.clearfix
                                                li
                                                    img(src='images/user1-128x128.jpg', alt='User Image')
                                                    a.users-list-name(href='#') Alexander Pierce
                                            // /.users-list
                                        // /.box-body
                                        .box-footer.text-center
                                            a.uppercase(href='#') View All Users
                            // User Account Menu
                            li.dropdown.user.user-menu
                                // Menu Toggle Button
                                a.dropdown-toggle(href='#' data-toggle='dropdown')
                                    // The user image in the navbar
                                    img.user-image#userAccntImgSmall(alt='User Image', src='images/avatar04.png')
                                    // hidden-xs hides the username on small devices so only the image appears.
                                    span.hidden-xs#userAccntNameSmall John Doe
                                ul.dropdown-menu
                                    // The user image in the menu
                                    li.user-header
                                        img.img-circle#userAccntImgLarge(alt='User Image', src='images/avatar04.png')
                                        p#userAccntName John Doe
                                            small#userAccntDetails Spotify ID: johndoe (unknown user)
                                    // Menu Footer
                                    li.user-footer
                                        .pull-left
                                            a.btn.btn-default.btn-flat#profile(href='/me') Profile
                                        .pull-right
                                            a.btn.btn-default.btn-flat(href='/logout') Sign out
            // Left side column. contains the logo and sidebar
            aside.main-sidebar
                // sidebar: style can be found in sidebar.less
                section.sidebar
                    // Sidebar user panel (optional)
                    .user-panel
                        .pull-left.image
                            img.img-circle#leftUserImg(alt='User Image', src='images/avatar04.png')
                        .pull-left.info
                            p#leftUserName John Doe
                            // Status
                            a(href='#')
                                i.fa.fa-circle.text-success Online
                    ul.sidebar-menu
                        li.header HEADER
                        // Optionally, you can add icons to the links
                        li
                            a(href='#')
                                i.fa.fa-link
                                span Suprise Me!
                            li.treeview
                                a(href='#')
                                    i.fa.fa-link
                                    span Playlists
                                    i.fa.fa-angle-left.pull-right
                                ul.treeview-menu
                                    li
                                        a(href='#') Playlist 1
                                    li
                                        a(href='#') Playlist 2
                    // /.sidebar-menu
                // /.sidebar
            // Content Wrapper. Contains page content
            .content-wrapper#mainblock
                block maincontent

            footer.main-footer
                // Default to the left
                strong Copyright &copy; 2015
                    a(href='#')  Crazy People. Inc.
                    |  All rights reserved.
        // ./wrapper
        // REQUIRED JS SCRIPTS
        // Bootstrap 3.3.2 JS
        script(src='javascripts/bootstrap.min.js', type='text/javascript')
        //BlockUI
        script(src="javascripts/jquery.blockUI.js")
        //SpinJS
        script(src="javascripts/spin.js")
        // AdminLTE App
        script(src='javascripts/app.min.js', type='text/javascript')
        //
            Optionally, you can add Slimscroll and FastClick plugins.
            Both of these plugins are recommended to enhance the
            user experience. Slimscroll is required when using the
            fixed layout.
        script(type='text/javascript').

            toastr.options = {
                "closeButton": false,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-bottom-right",
                "preventDuplicates": true,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            };

            var opts = {
                lines: 13, // The number of lines to draw
                length: 33, // The length of each line
                width: 11, // The line thickness
                radius: 39, // The radius of the inner circle
                corners: 1, // Corner roundness (0..1)
                rotate: 59, // The rotation offset
                direction: 1, // 1: clockwise, -1: counterclockwise
                color: '#000', // #rgb or #rrggbb or array of colors
                speed: 1.3, // Rounds per second
                trail: 64, // Afterglow percentage
                shadow: true, // Whether to render a shadow
                hwaccel: true, // Whether to use hardware acceleration
                className: 'spinner', // The CSS class to assign to the spinner
                zIndex: 2e9, // The z-index (defaults to 2000000000)
                top: '50%', // Top position relative to parent
                left: '50%' // Left position relative to parent
            };

            var spinner = new Spinner(opts).spin();

            $(document).ready(function () {
                $.ajax({
                    type: 'GET',
                    url: '/me',
                    beforeSend: function () {
                        var tmp = document.createElement("div");
                        tmp.appendChild(spinner.el);
                        $.blockUI({
                            message: tmp.innerHTML,
                            css: {
                                border: 'none',
                                backgroundColor: "transparent",
                                color: "transparent"
                            }
                        });
                    },
                    success: function (data) {
                        if (data) {
                            $('#userAccntImgSmall').attr("src", data.image);
                            $('#userAccntImgLarge').attr("src", data.image);
                            $('#leftUserImg').attr("src", data.image);
                            $('#userAccntNameSmall').text(data.name);
                            $('#userAccntName').html(data.name + "<small id='#userAccntDetails'>" + "Spotify ID: " + data.id + " (" + data.product + " user)" + "</small>");
                            $('#leftUserName').text(data.name);
                        }
                        spinner.stop();
                        $.unblockUI();
                        toastr.success('Successfully logged in as ' + data.name);
                    },
                    error: function () {
                        spinner.stop();
                        $.unblockUI();
                        toastr.error('Error while getting the information about user!');
                    }
                });

                $("#profile").loadingbar({
                    replaceURL: false,
                    direction: "right",
                    /* Default Ajax Parameters.  */
                    async: true,
                    cache: true,
                    error: function (xhr, text, e) {
                        toastr.error('Unable to load the profile of user at this time!');
                    },
                    dataType: "html",
                    done: function (data) {
                        $("#mainblock").html(data);
                    }
                });
            });